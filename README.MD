# Petstore Automation Project

## Подготовка окружения
1. Для работы проекта нужна версия ython 3.12.0 и выше
2. Выполнить команды последовательно:
```bash
pip install poetry 
poetry install
```

## Архитектура проекта

Проект разделен на несколько ключевых компонентов:

### HTTP Клиент

Базовый HTTP клиент реализован в файле `http_client/client.py`. Он содержит методы для отправки HTTP-запросов (`GET`, `POST`, `PUT`, `DELETE`) и обработки ответов. Методы обеспечивают функциональность основного HTTP-клиента.

### Petstore API Клиент

Файл `petstore/client.py` содержит реализацию клиента для взаимодействия с Petstore API. Этот клиент расширяет базовый HTTP клиент и предоставляет методы, специфичные для работы с API Petstore, такие как создание, получение, обновление и удаление питомцев.

### Тесты

Тесты написаны с использованием библиотеки `pytest` и находятся в папке `tests/petstore`. Каждый файл содержит набор тестов для соответствующих операций с питомцами (создание, обновление и т. д.), с использованием библиотек Faker, Random для генерации случайных данных.

### Конфигурации

- `config.py`: хранит конфигурации и базовый URL для Petstore API.
- `constans.py`: содержит постоянные значения, такие как маршруты и версии API.

## Запуск тестов

Для запуска тестов выполните следующую команду:
``` bash
poetry run python main.py
```
Эта команда запускает pytest с опцией --alluredir, чтобы результаты тестов сохранялись в каталоге alluredir для последующего создания отчета.

## Формирование отчета
Allure используется для генерации отчетов о тестировании. После выполнения тестов сгенерируйте отчет командой:

``` bash
allure serve alluredir
```

Эта команда откроет отчет в браузере, где можно детально ознакомиться с результатами.



## Найденные баги во время написания автотестов:

1. При отправке POST или PUT запроса с некорректным ID питомца (выходящим за рамки диапазона числами), возвращает 500-ые ошибки сервера, вместо 400-ых. Тесты: test_update_incorrect_data, test_create_a_new_pet_invalid_id
2. При отправке POST запроса и передача в поле name разных типов данных (int, float, bool) вместо строки (str) в поле name, сервис автоматически меняет его на str и при проведении ассерта на совпадение отправленного и полученного полей name, тест падает с ошибкой. Так как мы отправляем int, float, bool, а создается str. Тест: test_create_a_new_pet_incorrect_data_type
3. При создании питомца POST запросом с отрицательным числом ID возвращается 200-статус код, вместо 400-ых. Тест: test_create_a_new_pet_invalid_id
4. При создании питомца POST запросом с числом с плавающей точкой (float) в поле ID, возвращается 200-статус код. Тест: test_create_a_new_pet_invalid_id
5. При отправке в поле ID str методом POST, возвращается 200 статус-код. По всей видимости, когда поле получает на вход не целое число, то оно игнорирует полученный тип данных и создает питомца с автоматически подставленным id (самым первым не занятым числом int). Я бы уточник у аналитиков, насколько это правильно. Тест: test_create_a_new_pet_invalid_id
### Так как это тестовое задание, в затраты на выполнение которого я закладывал не так много времени, я реализовал запрошенные в ТЗ проверки, а также накидал сверху несколько проверок, преимущественно в методе POST, и на этом остановился. В реальном проекте, я бы продолжил по аналогии проверять остальные методы.